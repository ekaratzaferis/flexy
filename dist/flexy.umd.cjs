(function(p,u){typeof exports=="object"&&typeof module<"u"?u(exports):typeof define=="function"&&define.amd?define(["exports"],u):(p=typeof globalThis<"u"?globalThis:p||self,u(p.flexy={}))})(this,function(p){"use strict";function u(n,c){const i=c.getAttribute("position"),l=new n.Box3;l.center=new n.Vector3;for(let r=0;r<i.count;r++){const d=new n.Vector3;d.fromBufferAttribute(i,r),l.expandByPoint(d);const w=i[r],o=i[r+1],e=i[r+2];l.center.add(new n.Vector3(w,o,e))}return l.center.divideScalar(i.count/3),l}const Q=function({THREE:n,curve:c,quaternion:i,orientation:l,bufferGeometry:r,axis:d,scene:w}){const o=u(n,r),e=r.attributes.position.array;for(let t=0;t<e.length;t+=3){const f=parseFloat(e[t]),y=parseFloat(e[t+1]),h=parseFloat(e[t+2]);if(d==="x"){const s=(f-o.min.x)/(o.max.x-o.min.x),x=c.getPointAt(s),m=c.getTangentAt(s).normalize(),g=(l||new n.Vector3(0,0,1).applyQuaternion(i).normalize().multiplyScalar(1e6)).clone().cross(m.clone()).normalize(),z=new n.Quaternion().setFromAxisAngle(m.clone(),Math.atan2(h,y));g.applyQuaternion(z);const A=g.clone().setLength(new n.Vector3(0,y,h).length()),a=x.clone().add(A);e[t]=a.x,e[t+1]=a.y,e[t+2]=a.z}else if(d==="z"){const s=(h-o.min.z)/(o.max.z-o.min.z),x=c.getPointAt(s),m=c.getTangentAt(s).normalize(),g=(l||new n.Vector3(1,0,0).applyQuaternion(i).normalize().multiplyScalar(1e6)).clone().cross(m.clone()).normalize(),z=new n.Quaternion().setFromAxisAngle(m.clone(),Math.atan2(y,f)+Math.PI/2);g.applyQuaternion(z);const A=g.clone().setLength(new n.Vector3(f,y,0).length()),a=x.clone().add(A);e[t]=a.x,e[t+1]=a.y,e[t+2]=a.z}else if(d==="y"){const s=(y-o.min.y)/(o.max.y-o.min.y),x=c.getPointAt(s),m=c.getTangentAt(s).normalize(),g=(l.normalize().multiplyScalar(1e6)||new n.Vector3(0,1,0).applyQuaternion(i).normalize().multiplyScalar(1e6)).clone().cross(m.clone()).normalize(),z=new n.Quaternion().setFromAxisAngle(m.clone(),Math.atan2(f,h));g.applyQuaternion(z);const A=g.clone().setLength(new n.Vector3(f,0,h).length()),a=x.clone().add(A);e[t]=a.x,e[t+1]=a.y,e[t+2]=a.z}}r.attributes.position.needsUpdate=!0};p.bend=Q,Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})});
