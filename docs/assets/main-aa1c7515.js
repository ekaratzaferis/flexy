import{S as $,P as T,W as H,A as R,D as E,a as ee,O as ne,T as j,Q as U,B as te,M as J,b as S,c as K,C as oe,d as se,V as r,e as F,f as re}from"./OrbitControls-83b65b2c.js";function ae(e,t){const n=t.getAttribute("position"),o=new e.Box3;o.center=new e.Vector3;for(let s=0;s<n.count;s++){const c=new e.Vector3;c.fromBufferAttribute(n,s),o.expandByPoint(c);const l=n[s],g=n[s+1],a=n[s+2];o.center.add(new e.Vector3(l,g,a))}return o.center.divideScalar(n.count/3),o}const X=function({THREE:e,curve:t,quaternion:n,orientation:o,bufferGeometry:s,axis:c,preserveDimensions:l=!1,scene:g}){const a=ae(e,s),x=l?ie(t):0,p=s.attributes.position.array;for(let u=0;u<p.length;u+=3){const h=parseFloat(p[u]),V=parseFloat(p[u+1]),L=parseFloat(p[u+2]);if(c==="x"){let w=(h-a.min.x)/(a.max.x-a.min.x);const C=a.max.x-a.min.x;if(l&&C<=x){const b=C/x,z=.5-b/2,I=.5+b/2;w=z+w*(I-z)}const Q=t.getPointAt(w),v=t.getTangent(w),P=(o||new e.Vector3(0,0,1).applyQuaternion(n).normalize().multiplyScalar(1e6)).clone().cross(v.clone()).normalize(),B=new e.Quaternion().setFromAxisAngle(v.clone(),Math.atan2(L,V));P.applyQuaternion(B);const G=P.clone().setLength(new e.Vector3(0,V,L).length()),m=Q.clone().add(G);p[u]=m.x,p[u+1]=m.y,p[u+2]=m.z}else if(c==="z"){let w=(L-a.min.z)/(a.max.z-a.min.z);const C=a.max.z-a.min.z;if(l&&C<=x){const b=C/x,z=.5-b/2,I=.5+b/2;w=z+w*(I-z)}const Q=t.getPointAt(w),v=t.getTangent(w),P=(o||new e.Vector3(1,0,0).applyQuaternion(n).normalize().multiplyScalar(1e6)).clone().cross(v.clone()).normalize(),B=new e.Quaternion().setFromAxisAngle(v.clone(),Math.atan2(V,h)+Math.PI/2);P.applyQuaternion(B);const G=P.clone().setLength(new e.Vector3(h,V,0).length()),m=Q.clone().add(G);p[u]=m.x,p[u+1]=m.y,p[u+2]=m.z}else if(c==="y"){let w=(V-a.min.y)/(a.max.y-a.min.y);const C=a.max.y-a.min.y;if(l&&C<=x){const b=C/x,z=.5-b/2,I=.5+b/2;w=z+w*(I-z)}const Q=t.getPointAt(w),v=t.getTangent(w),P=(o||new e.Vector3(1,0,0).applyQuaternion(n).normalize().multiplyScalar(1e6)).clone().cross(v.clone()).normalize(),B=new e.Quaternion().setFromAxisAngle(v.clone(),Math.atan2(h,L));P.applyQuaternion(B);const G=P.clone().setLength(new e.Vector3(h,0,L).length()),m=Q.clone().add(G);p[u]=m.x,p[u+1]=m.y,p[u+2]=m.z}}s.attributes.position.needsUpdate=!0};function ie(e){let n=0,o=e.getPointAt(0);for(let s=1;s<=100;s++){const c=e.getPointAt(s/100);n+=c.distanceTo(o),o=c}return n}const f=new $,N=new T(75,window.innerWidth/window.innerHeight,.1,1e3);N.position.set(20,15,20);const M=new H({antialias:!0,alpha:!0});M.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(M.domElement);const ce=new R(4210752);f.add(ce);const Y=new E(16777215,.5);Y.position.set(1,1,1);f.add(Y);const le=new ee(5);f.add(le);const de=new ne(N,M.domElement);function Z(){requestAnimationFrame(Z),de.update(),M.render(f,N)}window.addEventListener("resize",function(){const e=window.innerWidth,t=window.innerHeight;M.setSize(e,t),N.aspect=e/t,N.updateProjectionMatrix()});M.setClearColor(74565);M.setPixelRatio(window.devicePixelRatio);M.setSize(window.innerWidth,window.innerHeight);const ge=({arcR:e,rotation:t})=>{const n=new r(0,1,0),o=new r(0,e,0).applyAxisAngle(n,t),s=new r(e*.55,e,0).applyAxisAngle(n,t),c=new r(e,e*.45,0).applyAxisAngle(n,t),l=new r(e,0,e).applyAxisAngle(n,t);return{curve:new F(o,s,c,l),rotationVector:n}},ue=({arcR:e,rotation:t})=>{const n=new r(0,1,0),o=new r(e,e/8,0).applyAxisAngle(n,t),s=new r(e/4,e/2,0).applyAxisAngle(n,t),c=new r(-e/4,e/2,0).applyAxisAngle(n,t),l=new r(-e,e/8,0).applyAxisAngle(n,t);return{curve:new F(o,s,c,l),rotationVector:n}},pe=({ellipseA:e,ellipseB:t,rotation:n})=>{const o=new r(1,0,1);let s=new r(e,0,0).applyAxisAngle(o,n),c=new r(e,t*.45,0).applyAxisAngle(o,n),l=new r(e*.55,t,0).applyAxisAngle(o,n),g=new r(0,t,0).applyAxisAngle(o,n);const a=new F(s,c,l,g);s=new r(0,t,0).applyAxisAngle(o,n),c=new r(-e*.45,t,0).applyAxisAngle(o,n),l=new r(-e,t*.55,0).applyAxisAngle(o,n),g=new r(-e,0,0).applyAxisAngle(o,n);const x=new F(s,c,l,g);s=new r(-e,0,0).applyAxisAngle(o,n),c=new r(-e,-t*.45,0).applyAxisAngle(o,n),l=new r(-e*.55,-t,0).applyAxisAngle(o,n),g=new r(0,-t,0).applyAxisAngle(o,n);const p=new F(s,c,l,g);s=new r(0,-t,0).applyAxisAngle(o,n),c=new r(e*.45,-t,0).applyAxisAngle(o,n),l=new r(e,-t*.55,0).applyAxisAngle(o,n),g=new r(e,0,0).applyAxisAngle(o,n);const u=new F(s,c,l,g),h=new re;return h.add(a),h.add(x),h.add(p),h.add(u),{curve:h,rotationVector:o.multiplyScalar(n)}},we=({sineX0:e,sineX1:t,sineAmplitude:n,rotation:o})=>{const s=new r(0,1,0),c=new r(-e,0,0).applyAxisAngle(s,o),l=new r(Math.ceil((-e+t)*(1/3)),n,0).applyAxisAngle(s,o),g=new r(Math.ceil((-e+t)*(1/3)),-n,0).applyAxisAngle(s,o),a=new r(t,0,0).applyAxisAngle(s,o);return{curve:new F(c,l,g,a),rotationVector:s}};function he({width:e,height:t,depth:n,widthSegments:o,heightSegments:s,depthSegments:c,wireframe:l}){const g=new te(e,t,n,o,s,c);let a;return l?a=new J({wireframe:!0}):(a=[],a.push(new S({color:16724787})),a.push(new S({color:16746496})),a.push(new S({color:16777011})),a.push(new S({color:3407667})),a.push(new S({color:3355647})),a.push(new S({color:8926207}))),new K(g,a)}function q(e){if(e.type==="3d_arc")return ge(e);if(e.type==="arc")return ue(e);if(e.type==="ellipse")return pe(e);if(e.type==="sine")return we(e)}function k(e){const n=e.getPoints(1e3),o=new oe(n),s=new se(o,1e3,.1,8,!1),c=new J({wireframe:!0});return new K(s,c)}let O=[];function d(){for(const s of O)f.remove(s);O=[];const e=he(i.box);f.add(e),O.push(e);const{curve:t,rotationVector:n}=q(i.firstCurve),o=k(t);if(i.box.wireframe&&f.add(o),O.push(o),i.secondAxisBend){i.secondCurve.rotation+=Math.PI/2;const s=q(i.secondCurve),c=k(s.curve);i.box.wireframe&&f.add(c),O.push(c),i.secondCurve.rotation-=Math.PI/2,X({THREE:j,curve:s.curve,quaternion:new U().setFromAxisAngle(s.rotationVector,i.secondCurve.rotation),bufferGeometry:e.geometry,preserveDimensions:i.box.preserveDimensions,axis:"z",scene:f})}X({THREE:j,curve:t,quaternion:new U().setFromAxisAngle(n,i.firstCurve.rotation),bufferGeometry:e.geometry,axis:"x",preserveDimensions:i.box.preserveDimensions,scene:f})}const i={box:{width:15,height:2,depth:2,widthSegments:60,heightSegments:10,depthSegments:10,wireframe:!1,preserveDimensions:!1},firstCurve:{type:"3d_arc",rotation:0,arcR:10,ellipseA:15,ellipseB:10,sineX0:0,sineX1:10,sineAmplitude:4},secondAxisBend:!1,secondCurve:{type:"arc",rotation:0,arcR:1,ellipseA:15,ellipseB:10,sineX0:0,sineX1:10,sineAmplitude:4}},D=new dat.GUI,A=D.addFolder("Box Geometry");A.open();A.add(i.box,"wireframe").onChange(d);A.add(i.box,"width",1,30).onChange(d);A.add(i.box,"height",1,30).onChange(d);A.add(i.box,"depth",1,30).onChange(d);A.add(i.box,"widthSegments",1,60).onChange(d);A.add(i.box,"heightSegments",1,60).onChange(d);A.add(i.box,"depthSegments",1,60).onChange(d);A.add(i.box,"preserveDimensions").onChange(d);const y=D.addFolder("First Bend on axis");y.open();y.add(i.firstCurve,"type",["arc","3d_arc","ellipse","sine"]).onChange(d);y.add(i.firstCurve,"rotation",0,2*Math.PI).onChange(d);y.add(i.firstCurve,"arcR",-20,20).onChange(d);y.add(i.firstCurve,"ellipseA",3,20).onChange(d);y.add(i.firstCurve,"ellipseB",3,20).onChange(d);y.add(i.firstCurve,"sineX0",0,20).onChange(d);y.add(i.firstCurve,"sineX1",0,20).onChange(d);y.add(i.firstCurve,"sineAmplitude",0,10).onChange(d);const W=D.addFolder("Second Bend on axis");W.open();W.add(i,"secondAxisBend").onChange(d);W.add(i.secondCurve,"rotation",0,2*Math.PI).onChange(d);W.add(i.secondCurve,"arcR",-20,20).onChange(d);d();Z();
